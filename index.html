<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBambu Comprehensive Marketing Presentation</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #27FB6B;
            --primary-dark: #00052E;
            --secondary-blue: #0066FF;
            --light-bg: #F8FAFB;
            --white: #FFFFFF;
            --text-dark: #1A1A1A;
            --text-gray: #6B7280;
            --border-light: #E5E7EB;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-bg);
            color: var(--text-dark);
            overflow-x: hidden;
        }

        /* Left Navigation Sidebar */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 280px;
            height: 100vh;
            background: linear-gradient(135deg, var(--primary-dark) 0%, #1a1f4d 100%);
            padding: 30px 20px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
        }

        .logo-section {
            text-align: center;
            margin-bottom: 40px;
            padding-bottom: 20px;
            border-bottom: 2px solid rgba(39, 251, 107, 0.3);
        }

        .logo-text {
            font-size: 32px;
            font-weight: 900;
            color: white;
        }

        .logo-text span {
            color: var(--primary-green);
        }

        .nav-section {
            margin-bottom: 30px;
        }

        .nav-section-title {
            font-size: 12px;
            font-weight: 700;
            color: var(--primary-green);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 15px;
            padding-left: 15px;
        }

        .nav-item {
            display: block;
            padding: 12px 15px;
            color: rgba(255, 255, 255, 0.7);
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .nav-item:hover {
            background: rgba(39, 251, 107, 0.1);
            color: var(--primary-green);
            transform: translateX(5px);
        }

        .nav-item.active {
            background: rgba(39, 251, 107, 0.2);
            color: var(--primary-green);
            border-left: 4px solid var(--primary-green);
            font-weight: 700;
        }

        /* Main Content Area */
        .main-content {
            margin-left: 280px;
            padding: 40px 60px;
            min-height: 100vh;
        }

        .content-section {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Cover Page */
        .cover-section {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: linear-gradient(135deg, var(--primary-dark) 0%, #1a1f4d 100%);
            color: white;
            text-align: center;
            margin: -40px -60px;
            padding: 60px;
        }

        .cover-title {
            font-size: 72px;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #FFFFFF 0%, var(--primary-green) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .cover-subtitle {
            font-size: 28px;
            font-weight: 500;
            margin-bottom: 60px;
            opacity: 0.9;
        }

        .cover-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 30px;
            max-width: 1000px;
            margin-top: 60px;
        }

        .cover-stat {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 20px;
            padding: 30px 20px;
            transition: all 0.3s ease;
        }

        .cover-stat:hover {
            transform: translateY(-10px) scale(1.05);
            border-color: var(--primary-green);
            box-shadow: 0 20px 60px rgba(39, 251, 107, 0.3);
        }

        .cover-stat-value {
            font-size: 48px;
            font-weight: 900;
            color: var(--primary-green);
            margin-bottom: 8px;
            text-shadow: 0 0 30px rgba(39, 251, 107, 0.4);
        }

        .cover-stat-label {
            font-size: 14px;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }

        /* Section Headers */
        .section-header {
            margin-bottom: 50px;
        }

        .section-number {
            display: inline-block;
            background: linear-gradient(135deg, var(--primary-green) 0%, #1ed760 100%);
            color: var(--primary-dark);
            font-size: 14px;
            font-weight: 800;
            padding: 8px 20px;
            border-radius: 50px;
            margin-bottom: 20px;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .section-title {
            font-size: 48px;
            font-weight: 800;
            color: var(--primary-dark);
            margin-bottom: 15px;
        }

        .section-subtitle {
            font-size: 18px;
            color: var(--text-gray);
            max-width: 800px;
        }

        /* Metric Cards */
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .metric-card {
            background: white;
            border-radius: 20px;
            padding: 35px 30px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
            border: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary-green);
            box-shadow: 0 20px 60px rgba(39, 251, 107, 0.2);
        }

        .metric-number {
            font-size: 48px;
            font-weight: 900;
            color: var(--primary-green);
            margin-bottom: 10px;
        }

        .metric-label {
            font-size: 14px;
            color: var(--text-gray);
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .metric-detail {
            font-size: 13px;
            color: var(--text-gray);
            margin-top: 10px;
        }

        /* D3 Chart Container */
        .chart-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        }

        .chart-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-dark);
            margin-bottom: 30px;
        }

        /* D3 Styles */
        .bar {
            transition: all 0.3s ease;
        }

        .bar:hover {
            opacity: 0.8;
        }

        .axis path,
        .axis line {
            stroke: var(--border-light);
        }

        .axis text {
            font-family: 'Poppins', sans-serif;
            font-size: 12px;
            fill: var(--text-gray);
        }

        .line {
            fill: none;
            stroke-width: 3;
        }

        .dot {
            transition: all 0.2s ease;
        }

        .dot:hover {
            r: 8;
        }

        .tooltip {
            position: absolute;
            background: var(--primary-dark);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        /* Content Boxes */
        .content-box {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
            border-left: 6px solid var(--primary-green);
        }

        .content-box h3 {
            font-size: 28px;
            color: var(--primary-dark);
            margin-bottom: 20px;
            font-weight: 700;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 30px 0;
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
        }

        thead th {
            background: var(--primary-green);
            color: var(--primary-dark);
            font-weight: 800;
            padding: 20px;
            text-align: left;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        tbody td {
            padding: 20px;
            border-bottom: 1px solid var(--border-light);
            color: var(--text-dark);
            font-size: 15px;
        }

        tbody tr:hover {
            background: rgba(39, 251, 107, 0.05);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        /* Insight Box */
        .insight-box {
            background: linear-gradient(135deg, var(--primary-green) 0%, #1ed760 100%);
            color: var(--primary-dark);
            padding: 30px 40px;
            border-radius: 16px;
            margin: 40px 0;
            font-size: 18px;
            font-weight: 600;
            line-height: 1.6;
        }

        .insight-box strong {
            font-weight: 900;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 30px 20px;
            }

            .cover-title {
                font-size: 48px;
            }

            .section-title {
                font-size: 36px;
            }

            .chart-container {
                padding: 20px;
            }
        }

        /* Mobile Menu Toggle */
        .menu-toggle {
            display: none;
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1001;
            background: var(--primary-green);
            color: var(--primary-dark);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(39, 251, 107, 0.4);
        }

        @media (max-width: 1024px) {
            .menu-toggle {
                display: block;
            }
        }

        /* Scroll to Top Button */
        .scroll-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: var(--primary-green);
            color: var(--primary-dark);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(39, 251, 107, 0.4);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 999;
        }

        .scroll-top.visible {
            opacity: 1;
        }

        .scroll-top:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(39, 251, 107, 0.6);
        }

        /* Progress Ring */
        .progress-ring {
            margin: 20px auto;
        }

        .progress-ring-circle {
            transition: stroke-dashoffset 0.35s;
            transform: rotate(-90deg);
            transform-origin: 50% 50%;
        }
    </style>
</head>
<body>

<!-- Mobile Menu Toggle -->
<button class="menu-toggle" onclick="toggleSidebar()">‚ò∞</button>

<!-- Left Sidebar Navigation -->
<aside class="sidebar" id="sidebar">
    <div class="logo-section">
        <div class="logo-text">My<span>Bambu</span></div>
        <div style="color: var(--primary-green); font-size: 12px; margin-top: 5px; font-weight: 600;">Marketing Intelligence</div>
    </div>

    <nav>
        <div class="nav-section">
            <div class="nav-section-title">Overview</div>
            <a class="nav-item active" onclick="showSection('cover')">Executive Summary</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Influencer Marketing</div>
            <a class="nav-item" onclick="showSection('influencer-overview')">2024-2025 Overview</a>
            <a class="nav-item" onclick="showSection('influencer-performance')">Performance Metrics</a>
            <a class="nav-item" onclick="showSection('influencer-platforms')">Platform Analysis</a>
            <a class="nav-item" onclick="showSection('influencer-creators')">Top Creators</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Paid Advertising</div>
            <a class="nav-item" onclick="showSection('paid-ads-q3')">Q3 2025 Results</a>
            <a class="nav-item" onclick="showSection('paid-ads-conversion')">Conversion Funnel</a>
            <a class="nav-item" onclick="showSection('paid-ads-trends')">Cost Trends</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Customer Analytics</div>
            <a class="nav-item" onclick="showSection('customer-stickiness')">Customer Stickiness</a>
            <a class="nav-item" onclick="showSection('customer-segments')">Customer Segments</a>
            <a class="nav-item" onclick="showSection('customer-retention')">Retention Analysis</a>
        </div>

        <div class="nav-section">
            <div class="nav-section-title">Budget & Strategy</div>
            <a class="nav-item" onclick="showSection('marketing-budget')">Marketing Budget</a>
            <a class="nav-item" onclick="showSection('acquisition-channels')">Acquisition Channels</a>
        </div>
    </nav>
</aside>

<!-- Tooltip for D3 charts -->
<div class="tooltip" id="tooltip"></div>

<!-- Main Content -->
<main class="main-content">

<!-- Cover / Executive Summary -->
<section id="cover" class="content-section active">
    <div class="cover-section">
        <div class="cover-title">MyBambu Marketing Excellence</div>
        <div class="cover-subtitle">Comprehensive Marketing Performance Report</div>

        <div class="cover-stats">
            <div class="cover-stat">
                <div class="cover-stat-value">100M+</div>
                <div class="cover-stat-label">Total Video Views</div>
            </div>
            <div class="cover-stat">
                <div class="cover-stat-value">214K</div>
                <div class="cover-stat-label">Active Customers</div>
            </div>
            <div class="cover-stat">
                <div class="cover-stat-value">113K</div>
                <div class="cover-stat-label">Q3 New Accounts</div>
            </div>
            <div class="cover-stat">
                <div class="cover-stat-value">$41.40</div>
                <div class="cover-stat-label">Average CPA</div>
            </div>
            <div class="cover-stat">
                <div class="cover-stat-value">8.37</div>
                <div class="cover-stat-label">Months Retention</div>
            </div>
        </div>
    </div>
</section>

<!-- Influencer Marketing - Overview -->
<section id="influencer-overview" class="content-section">
    <div class="section-header">
        <span class="section-number">Influencer Marketing</span>
        <h1 class="section-title">2024-2025 Combined Impact</h1>
        <p class="section-subtitle">Two years of influencer marketing excellence delivering unprecedented results</p>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">100M+</div>
            <div class="metric-label">Total Views</div>
            <div class="metric-detail">Across both years</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">1,034</div>
            <div class="metric-label">Videos Published</div>
            <div class="metric-detail">432 (2024) + 602 (2025)</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">4.39M</div>
            <div class="metric-label">Total Engagements</div>
            <div class="metric-detail">Likes, comments, shares, saves</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">134+</div>
            <div class="metric-label">Influencers</div>
            <div class="metric-detail">Active partnerships</div>
        </div>
    </div>

    <!-- D3 Chart: Year-over-Year Growth -->
    <div class="chart-container">
        <div class="chart-title">üìä Year-over-Year Growth Comparison</div>
        <div id="yoyGrowthChart"></div>
    </div>

    <div class="insight-box">
        <strong>Key Insight:</strong> 56% YoY growth in total views (38.8M ‚Üí 60.4M) with 39% increase in video output. Average views per video improved 12% despite engagement rate challenges requiring strategic attention.
    </div>
</section>

<!-- Influencer Performance -->
<section id="influencer-performance" class="content-section">
    <div class="section-header">
        <span class="section-number">Performance Metrics</span>
        <h1 class="section-title">2024 Complete Metrics</h1>
        <p class="section-subtitle">Comprehensive breakdown of all influencer marketing KPIs</p>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">38.8M</div>
            <div class="metric-label">Total Views</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">1.45M</div>
            <div class="metric-label">Total Likes</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">30,825</div>
            <div class="metric-label">Comments</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">4.13%</div>
            <div class="metric-label">Engagement Rate</div>
        </div>
    </div>

    <!-- D3 Chart: Engagement Breakdown -->
    <div class="chart-container">
        <div class="chart-title">üéØ 2024 Engagement Breakdown</div>
        <div id="engagementDonutChart"></div>
    </div>
</section>

<!-- Platform Analysis -->
<section id="influencer-platforms" class="content-section">
    <div class="section-header">
        <span class="section-number">Platform Strategy</span>
        <h1 class="section-title">Multi-Platform Excellence</h1>
        <p class="section-subtitle">Strategic distribution across Instagram, TikTok, Facebook, and YouTube</p>
    </div>

    <!-- D3 Chart: Platform Distribution -->
    <div class="chart-container">
        <div class="chart-title">üì± Platform Distribution (2024)</div>
        <div id="platformChart"></div>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">61%</div>
            <div class="metric-label">Instagram</div>
            <div class="metric-detail">264 videos</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">26%</div>
            <div class="metric-label">TikTok</div>
            <div class="metric-detail">114 videos</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">12%</div>
            <div class="metric-label">Facebook</div>
            <div class="metric-detail">51 videos</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">1%</div>
            <div class="metric-label">YouTube</div>
            <div class="metric-detail">3 videos - Growth Opp</div>
        </div>
    </div>
</section>

<!-- Top Creators -->
<section id="influencer-creators" class="content-section">
    <div class="section-header">
        <span class="section-number">Hall of Fame</span>
        <h1 class="section-title">Top Performing Creators 2024</h1>
        <p class="section-subtitle">Our superstar influencer partners who drove millions of views</p>
    </div>

    <!-- D3 Chart: Top Creators -->
    <div class="chart-container">
        <div class="chart-title">üèÜ Top 10 Creators by Total Views</div>
        <div id="topCreatorsChart"></div>
    </div>
</section>

<!-- Q3 Paid Ads Results -->
<section id="paid-ads-q3" class="content-section">
    <div class="section-header">
        <span class="section-number">Q3 2025 Paid Advertising</span>
        <h1 class="section-title">Q3 Results - Exceeded Target</h1>
        <p class="section-subtitle">112,965 accounts acquired at $41.40 CPA - 22% above goal</p>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">112,965</div>
            <div class="metric-label">Accounts Acquired</div>
            <div class="metric-detail">22% above target</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$41.40</div>
            <div class="metric-label">Cost Per Account</div>
            <div class="metric-detail">40% better than industry</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">35%</div>
            <div class="metric-label">Conversion Rate</div>
            <div class="metric-detail">Exceeds 30% KPI</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$5.4M</div>
            <div class="metric-label">Total Q3 Spend</div>
        </div>
    </div>

    <!-- D3 Chart: Target vs Actual -->
    <div class="chart-container">
        <div class="chart-title">üéØ Q3 Target Achievement</div>
        <div id="targetAchievementChart"></div>
    </div>

    <div class="insight-box">
        <strong>Insight:</strong> We exceeded our Q3 goal by 22%, bringing in 112,965 accounts. Our CPA of $41.40 is 40% better than the fintech industry average of $65-85, demonstrating exceptional campaign efficiency.
    </div>
</section>

<!-- Conversion Funnel -->
<section id="paid-ads-conversion" class="content-section">
    <div class="section-header">
        <span class="section-number">Conversion Analysis</span>
        <h1 class="section-title">Q3 Conversion Funnel</h1>
        <p class="section-subtitle">35% end-to-end conversion rate exceeds 30% KPI</p>
    </div>

    <!-- D3 Chart: Conversion Funnel -->
    <div class="chart-container">
        <div class="chart-title">üìà Monthly Conversion Trends (July-September)</div>
        <div id="conversionTrendChart"></div>
    </div>

    <table>
        <thead>
            <tr>
                <th>Month</th>
                <th>Install ‚Üí Profile</th>
                <th>Profile ‚Üí Account</th>
                <th>Install ‚Üí Account (30% KPI)</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><strong>July</strong></td>
                <td>47%</td>
                <td>60%</td>
                <td style="color: #ff6b6b; font-weight: 900;">28% ‚ö†Ô∏è</td>
            </tr>
            <tr>
                <td><strong>August</strong></td>
                <td>50%</td>
                <td>61%</td>
                <td style="color: var(--primary-green); font-weight: 900;">31% ‚úì</td>
            </tr>
            <tr>
                <td><strong>September</strong></td>
                <td>56%</td>
                <td>63%</td>
                <td style="color: var(--primary-green); font-weight: 900; font-size: 20px;">35% üöÄ</td>
            </tr>
        </tbody>
    </table>
</section>

<!-- Cost Trends -->
<section id="paid-ads-trends" class="content-section">
    <div class="section-header">
        <span class="section-number">Cost Efficiency</span>
        <h1 class="section-title">Cost Metrics Trends</h1>
        <p class="section-subtitle">All metrics significantly below industry benchmarks</p>
    </div>

    <!-- D3 Chart: Cost Trends -->
    <div class="chart-container">
        <div class="chart-title">üí∞ CPA Trend vs Industry Average</div>
        <div id="cpaTrendChart"></div>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">$15.18</div>
            <div class="metric-label">CPI (Q3 Avg)</div>
            <div class="metric-detail">Industry: $18-25 | ‚ñ≤ 15% Better</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$29.67</div>
            <div class="metric-label">CPP (Q3 Avg)</div>
            <div class="metric-detail">Industry: $35-50 | ‚ñ≤ 20% Better</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$41.40</div>
            <div class="metric-label">CPA (Q3 Avg)</div>
            <div class="metric-detail">Industry: $65-85 | ‚ñ≤ 40% Better</div>
        </div>
    </div>
</section>

<!-- Customer Stickiness -->
<section id="customer-stickiness" class="content-section">
    <div class="section-header">
        <span class="section-number">Customer Analytics</span>
        <h1 class="section-title">Customer Stickiness Analysis</h1>
        <p class="section-subtitle">214,852 active customers with 8.37 month average retention</p>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">214,852</div>
            <div class="metric-label">Active Customers</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">8.37</div>
            <div class="metric-label">Avg Retention</div>
            <div class="metric-detail">Months</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$9.06</div>
            <div class="metric-label">Monthly Revenue</div>
            <div class="metric-detail">Per customer</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">14</div>
            <div class="metric-label">Monthly Transactions</div>
        </div>
    </div>
</section>

<!-- Customer Segments -->
<section id="customer-segments" class="content-section">
    <div class="section-header">
        <span class="section-number">Customer Segments</span>
        <h1 class="section-title">5 Customer Segments</h1>
        <p class="section-subtitle">Based on engagement, transaction frequency, and lifetime value</p>
    </div>

    <!-- D3 Chart: Customer Segments -->
    <div class="chart-container">
        <div class="chart-title">üë• Customer Segment Distribution</div>
        <div id="customerSegmentsChart"></div>
    </div>

    <!-- D3 Chart: Retention by Segment -->
    <div class="chart-container">
        <div class="chart-title">üìä Retention & Revenue by Segment</div>
        <div id="segmentRetentionChart"></div>
    </div>

    <div class="insight-box">
        <strong>Key Insight:</strong> Diamond customers stay 3x longer (13.51 months vs 4.64 months for Pearl) and generate 3.4x more revenue ($30.60 vs $9.06 average). Top 25% of customers (Diamond + Emerald) drive majority of engagement.
    </div>
</section>

<!-- Retention Analysis -->
<section id="customer-retention" class="content-section">
    <div class="section-header">
        <span class="section-number">Retention</span>
        <h1 class="section-title">Product Bundling Drives Stickiness</h1>
        <p class="section-subtitle">Customers using multiple products stay active significantly longer</p>
    </div>

    <!-- D3 Chart: Product Bundle Performance -->
    <div class="chart-container">
        <div class="chart-title">üíº Product Bundle Adoption & Retention</div>
        <div id="productBundleChart"></div>
    </div>

    <div class="insight-box">
        <strong>Insight:</strong> Customers using Card + International Transfers show the highest retention at 29.4% staying 6+ months. Product bundling is a critical driver of customer lifetime value - multi-product users have 40% higher retention.
    </div>
</section>

<!-- Marketing Budget -->
<section id="marketing-budget" class="content-section">
    <div class="section-header">
        <span class="section-number">Budget Planning</span>
        <h1 class="section-title">Marketing Budget - $600K/Month</h1>
        <p class="section-subtitle">Strategic reallocation: 70% budget reduction | 50% Boots focus</p>
    </div>

    <div class="metric-grid">
        <div class="metric-card">
            <div class="metric-number">$600K</div>
            <div class="metric-label">Monthly Budget</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">10,424</div>
            <div class="metric-label">Target Customers</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">$57.56</div>
            <div class="metric-label">Blended CAC</div>
        </div>
        <div class="metric-card">
            <div class="metric-number">50%</div>
            <div class="metric-label">Boots Allocation</div>
        </div>
    </div>

    <!-- D3 Chart: Budget Allocation -->
    <div class="chart-container">
        <div class="chart-title">üíµ Budget Allocation by Channel</div>
        <div id="budgetAllocationChart"></div>
    </div>
</section>

<!-- Acquisition Channels -->
<section id="acquisition-channels" class="content-section">
    <div class="section-header">
        <span class="section-number">Channel Analysis</span>
        <h1 class="section-title">Customer Acquisition Channels</h1>
        <p class="section-subtitle">Multi-channel strategy with focus on efficiency and scale</p>
    </div>

    <!-- D3 Chart: Before/After Comparison -->
    <div class="chart-container">
        <div class="chart-title">üìä Budget Reallocation: Before vs After</div>
        <div id="beforeAfterChart"></div>
    </div>

    <div class="insight-box">
        <strong>Strategy:</strong> Increased Boots allocation (50%) for stability and predictable performance at fixed $55 CPA. Digital (40%) focused on highest-ROI campaigns. 70% budget reduction from $2M to $600K/month while maintaining acquisition targets through efficiency gains.
    </div>
</section>

</main>

<!-- Scroll to Top Button -->
<div class="scroll-top" id="scrollTop" onclick="scrollToTop()">‚Üë</div>

<script>
// Configuration
const colors = {
    primary: '#27FB6B',
    primaryDark: '#00052E',
    secondary: '#0066FF',
    gray: '#6B7280',
    lightGray: '#E5E7EB',
    red: '#ff6b6b',
    yellow: '#FFD700',
    purple: '#8b5cf6'
};

// Tooltip
const tooltip = d3.select('#tooltip');

function showTooltip(event, html) {
    tooltip.style('opacity', 1)
        .html(html)
        .style('left', (event.pageX + 10) + 'px')
        .style('top', (event.pageY - 10) + 'px');
}

function hideTooltip() {
    tooltip.style('opacity', 0);
}

// Navigation
function showSection(sectionId) {
    document.querySelectorAll('.content-section').forEach(section => {
        section.classList.remove('active');
    });
    document.getElementById(sectionId).classList.add('active');

    document.querySelectorAll('.nav-item').forEach(item => {
        item.classList.remove('active');
    });
    event.target.classList.add('active');

    document.querySelector('.main-content').scrollTop = 0;

    if (window.innerWidth <= 1024) {
        document.getElementById('sidebar').classList.remove('active');
    }

    // Initialize D3 charts when section becomes visible
    setTimeout(() => initChartsForSection(sectionId), 100);
}

function toggleSidebar() {
    document.getElementById('sidebar').classList.toggle('active');
}

function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

window.addEventListener('scroll', () => {
    const scrollTop = document.getElementById('scrollTop');
    if (window.pageYOffset > 300) {
        scrollTop.classList.add('visible');
    } else {
        scrollTop.classList.remove('visible');
    }
});

// D3 Chart Functions
function initChartsForSection(sectionId) {
    switch(sectionId) {
        case 'influencer-overview':
            createYoYGrowthChart();
            break;
        case 'influencer-performance':
            createEngagementDonutChart();
            break;
        case 'influencer-platforms':
            createPlatformChart();
            break;
        case 'influencer-creators':
            createTopCreatorsChart();
            break;
        case 'paid-ads-q3':
            createTargetAchievementChart();
            break;
        case 'paid-ads-conversion':
            createConversionTrendChart();
            break;
        case 'paid-ads-trends':
            createCPATrendChart();
            break;
        case 'customer-segments':
            createCustomerSegmentsChart();
            createSegmentRetentionChart();
            break;
        case 'customer-retention':
            createProductBundleChart();
            break;
        case 'marketing-budget':
            createBudgetAllocationChart();
            break;
        case 'acquisition-channels':
            createBeforeAfterChart();
            break;
    }
}

// Year-over-Year Growth Chart
function createYoYGrowthChart() {
    const container = d3.select('#yoyGrowthChart');
    container.selectAll('*').remove();

    const data = [
        { year: '2024', videos: 432, views: 38.8, engagements: 1.6 },
        { year: '2025 (Jan-Oct)', videos: 602, views: 60.4, engagements: 0.5 }
    ];

    const margin = { top: 20, right: 30, bottom: 60, left: 80 };
    const width = 800 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
        .domain(data.map(d => d.year))
        .range([0, width])
        .padding(0.3);

    const y = d3.scaleLinear()
        .domain([0, d3.max(data, d => Math.max(d.videos, d.views))])
        .range([height, 0]);

    // Bars for Videos
    svg.selectAll('.bar-videos')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.year))
        .attr('width', x.bandwidth() / 3)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.year}</strong><br>Videos: ${d.videos}`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('y', d => y(d.videos))
        .attr('height', d => height - y(d.videos));

    // Bars for Views (in millions)
    svg.selectAll('.bar-views')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.year) + x.bandwidth() / 3)
        .attr('width', x.bandwidth() / 3)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.secondary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.year}</strong><br>Views: ${d.views}M`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay(200)
        .attr('y', d => y(d.views))
        .attr('height', d => height - y(d.views));

    // Axes
    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y))
        .attr('class', 'axis');

    // Legend
    const legend = svg.append('g')
        .attr('transform', `translate(${width - 150}, 10)`);

    legend.append('rect').attr('width', 15).attr('height', 15).attr('fill', colors.primary);
    legend.append('text').attr('x', 20).attr('y', 12).text('Videos').style('font-size', '12px').attr('fill', colors.gray);

    legend.append('rect').attr('y', 20).attr('width', 15).attr('height', 15).attr('fill', colors.secondary);
    legend.append('text').attr('x', 20).attr('y', 32).text('Views (M)').style('font-size', '12px').attr('fill', colors.gray);
}

// Engagement Donut Chart
function createEngagementDonutChart() {
    const container = d3.select('#engagementDonutChart');
    container.selectAll('*').remove();

    const data = [
        { label: 'Likes', value: 1453096 },
        { label: 'Shares', value: 65059 },
        { label: 'Saves', value: 49912 },
        { label: 'Comments', value: 30825 }
    ];

    const width = 500;
    const height = 500;
    const radius = Math.min(width, height) / 2;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height)
        .attr('viewBox', `0 0 ${width} ${height}`)
        .append('g')
        .attr('transform', `translate(${width / 2},${height / 2})`);

    const color = d3.scaleOrdinal()
        .domain(data.map(d => d.label))
        .range([colors.primary, colors.secondary, colors.purple, colors.yellow]);

    const pie = d3.pie()
        .value(d => d.value)
        .sort(null);

    const arc = d3.arc()
        .innerRadius(radius * 0.6)
        .outerRadius(radius * 0.9);

    const arcs = svg.selectAll('arc')
        .data(pie(data))
        .enter().append('g');

    arcs.append('path')
        .attr('d', arc)
        .attr('fill', d => color(d.data.label))
        .attr('stroke', 'white')
        .style('stroke-width', '3px')
        .style('opacity', 0.8)
        .on('mouseover', function(event, d) {
            d3.select(this).style('opacity', 1);
            showTooltip(event, `<strong>${d.data.label}</strong><br>${d.data.value.toLocaleString()}`);
        })
        .on('mouseout', function() {
            d3.select(this).style('opacity', 0.8);
            hideTooltip();
        });

    // Center text
    svg.append('text')
        .attr('text-anchor', 'middle')
        .attr('y', -10)
        .style('font-size', '24px')
        .style('font-weight', '900')
        .attr('fill', colors.primaryDark)
        .text('1.6M');

    svg.append('text')
        .attr('text-anchor', 'middle')
        .attr('y', 15)
        .style('font-size', '14px')
        .attr('fill', colors.gray)
        .text('Total Engagements');
}

// Platform Distribution Chart
function createPlatformChart() {
    const container = d3.select('#platformChart');
    container.selectAll('*').remove();

    const data = [
        { platform: 'Instagram', videos: 264, percentage: 61 },
        { platform: 'TikTok', videos: 114, percentage: 26 },
        { platform: 'Facebook', videos: 51, percentage: 12 },
        { platform: 'YouTube', videos: 3, percentage: 1 }
    ];

    const margin = { top: 20, right: 30, bottom: 60, left: 120 };
    const width = 800 - margin.left - margin.right;
    const height = 350 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleLinear()
        .domain([0, 70])
        .range([0, width]);

    const y = d3.scaleBand()
        .domain(data.map(d => d.platform))
        .range([0, height])
        .padding(0.2);

    svg.selectAll('.bar')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', 0)
        .attr('y', d => y(d.platform))
        .attr('width', 0)
        .attr('height', y.bandwidth())
        .attr('fill', colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.platform}</strong><br>${d.videos} videos (${d.percentage}%)`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('width', d => x(d.percentage));

    // Add percentage labels
    svg.selectAll('.label')
        .data(data)
        .enter().append('text')
        .attr('class', 'label')
        .attr('x', d => x(d.percentage) + 10)
        .attr('y', d => y(d.platform) + y.bandwidth() / 2)
        .attr('dy', '0.35em')
        .style('font-size', '16px')
        .style('font-weight', '700')
        .attr('fill', colors.primaryDark)
        .text(d => `${d.percentage}%`);

    svg.append('g')
        .call(d3.axisLeft(y))
        .attr('class', 'axis');
}

// Top Creators Chart
function createTopCreatorsChart() {
    const container = d3.select('#topCreatorsChart');
    container.selectAll('*').remove();

    const data = [
        { name: 'Antonia Botero', views: 10378400 },
        { name: 'Hormazatv', views: 4423700 },
        { name: 'Yoaibimar Daal Daal', views: 3522300 },
        { name: 'Antonia Botero y Xavi', views: 1735000 },
        { name: 'Nati Show', views: 1457110 },
        { name: 'Cristina Rivera', views: 1234000 },
        { name: 'Tino Sueno', views: 987000 },
        { name: 'Camila Sweet', views: 876000 },
        { name: 'Estaban Love', views: 654000 },
        { name: 'Laura Latina', views: 543000 }
    ];

    const margin = { top: 20, right: 30, bottom: 60, left: 180 };
    const width = 900 - margin.left - margin.right;
    const height = 500 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleLinear()
        .domain([0, d3.max(data, d => d.views)])
        .range([0, width]);

    const y = d3.scaleBand()
        .domain(data.map(d => d.name))
        .range([0, height])
        .padding(0.2);

    const colorScale = d3.scaleOrdinal()
        .domain([0, 1, 2])
        .range(['#FFD700', '#C0C0C0', '#CD7F32']);

    svg.selectAll('.bar')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', 0)
        .attr('y', d => y(d.name))
        .attr('width', 0)
        .attr('height', y.bandwidth())
        .attr('fill', (d, i) => i < 3 ? colorScale(i) : colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.name}</strong><br>${d.views.toLocaleString()} views`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay((d, i) => i * 100)
        .attr('width', d => x(d.views));

    svg.append('g')
        .call(d3.axisLeft(y))
        .attr('class', 'axis');
}

// Target Achievement Chart
function createTargetAchievementChart() {
    const container = d3.select('#targetAchievementChart');
    container.selectAll('*').remove();

    const data = [
        { category: 'Goal', value: 92837, color: colors.gray },
        { category: 'Achieved', value: 112965, color: colors.primary }
    ];

    const margin = { top: 20, right: 30, bottom: 60, left: 80 };
    const width = 600 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
        .domain(data.map(d => d.category))
        .range([0, width])
        .padding(0.3);

    const y = d3.scaleLinear()
        .domain([0, 120000])
        .range([height, 0]);

    svg.selectAll('.bar')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.category))
        .attr('width', x.bandwidth())
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', d => d.color)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.category}</strong><br>${d.value.toLocaleString()} accounts`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('y', d => y(d.value))
        .attr('height', d => height - y(d.value));

    // Add value labels on bars
    svg.selectAll('.label')
        .data(data)
        .enter().append('text')
        .attr('x', d => x(d.category) + x.bandwidth() / 2)
        .attr('y', d => y(d.value) - 10)
        .attr('text-anchor', 'middle')
        .style('font-size', '18px')
        .style('font-weight', '900')
        .attr('fill', colors.primaryDark)
        .text(d => d.value.toLocaleString());

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y).tickFormat(d => (d/1000) + 'K'))
        .attr('class', 'axis');
}

// Conversion Trend Chart
function createConversionTrendChart() {
    const container = d3.select('#conversionTrendChart');
    container.selectAll('*').remove();

    const data = [
        { month: 'July', rate: 28 },
        { month: 'August', rate: 31 },
        { month: 'September', rate: 35 }
    ];

    const margin = { top: 40, right: 30, bottom: 60, left: 60 };
    const width = 700 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scalePoint()
        .domain(data.map(d => d.month))
        .range([0, width]);

    const y = d3.scaleLinear()
        .domain([0, 40])
        .range([height, 0]);

    const line = d3.line()
        .x(d => x(d.month))
        .y(d => y(d.rate))
        .curve(d3.curveMonotoneX);

    // Draw line
    const path = svg.append('path')
        .datum(data)
        .attr('class', 'line')
        .attr('d', line)
        .attr('stroke', colors.primary)
        .attr('stroke-width', 4);

    const pathLength = path.node().getTotalLength();
    path.attr('stroke-dasharray', pathLength)
        .attr('stroke-dashoffset', pathLength)
        .transition()
        .duration(2000)
        .attr('stroke-dashoffset', 0);

    // Add dots
    svg.selectAll('.dot')
        .data(data)
        .enter().append('circle')
        .attr('class', 'dot')
        .attr('cx', d => x(d.month))
        .attr('cy', d => y(d.rate))
        .attr('r', 0)
        .attr('fill', colors.primary)
        .attr('stroke', 'white')
        .attr('stroke-width', 3)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.month}</strong><br>${d.rate}% conversion`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay((d, i) => i * 300)
        .attr('r', 8);

    // Add KPI line
    svg.append('line')
        .attr('x1', 0)
        .attr('x2', width)
        .attr('y1', y(30))
        .attr('y2', y(30))
        .attr('stroke', colors.red)
        .attr('stroke-width', 2)
        .attr('stroke-dasharray', '5,5');

    svg.append('text')
        .attr('x', width - 80)
        .attr('y', y(30) - 10)
        .style('font-size', '12px')
        .attr('fill', colors.red)
        .text('30% KPI Target');

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y).tickFormat(d => d + '%'))
        .attr('class', 'axis');
}

// CPA Trend Chart
function createCPATrendChart() {
    const container = d3.select('#cpaTrendChart');
    container.selectAll('*').remove();

    const data = [
        { month: 'Jan', mybambu: 43, industry: 75 },
        { month: 'Feb', mybambu: 44, industry: 75 },
        { month: 'Mar', mybambu: 45, industry: 75 },
        { month: 'Apr', mybambu: 47, industry: 75 },
        { month: 'May', mybambu: 50, industry: 75 },
        { month: 'Jun', mybambu: 56, industry: 75 },
        { month: 'Jul', mybambu: 50.82, industry: 75 },
        { month: 'Aug', mybambu: 52.07, industry: 75 },
        { month: 'Sep', mybambu: 42.30, industry: 75 }
    ];

    const margin = { top: 40, right: 30, bottom: 60, left: 60 };
    const width = 900 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scalePoint()
        .domain(data.map(d => d.month))
        .range([0, width]);

    const y = d3.scaleLinear()
        .domain([0, 90])
        .range([height, 0]);

    const lineMyBambu = d3.line()
        .x(d => x(d.month))
        .y(d => y(d.mybambu))
        .curve(d3.curveMonotoneX);

    const lineIndustry = d3.line()
        .x(d => x(d.month))
        .y(d => y(d.industry));

    // Industry average line
    svg.append('path')
        .datum(data)
        .attr('class', 'line')
        .attr('d', lineIndustry)
        .attr('stroke', colors.red)
        .attr('stroke-width', 2)
        .attr('stroke-dasharray', '5,5')
        .attr('opacity', 0.6);

    // MyBambu line
    const pathMyBambu = svg.append('path')
        .datum(data)
        .attr('class', 'line')
        .attr('d', lineMyBambu)
        .attr('stroke', colors.primary)
        .attr('stroke-width', 4);

    const pathLength = pathMyBambu.node().getTotalLength();
    pathMyBambu.attr('stroke-dasharray', pathLength)
        .attr('stroke-dashoffset', pathLength)
        .transition()
        .duration(2000)
        .attr('stroke-dashoffset', 0);

    // Add dots for MyBambu
    svg.selectAll('.dot')
        .data(data)
        .enter().append('circle')
        .attr('class', 'dot')
        .attr('cx', d => x(d.month))
        .attr('cy', d => y(d.mybambu))
        .attr('r', 6)
        .attr('fill', colors.primary)
        .attr('stroke', 'white')
        .attr('stroke-width', 2)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.month}</strong><br>MyBambu: $${d.mybambu.toFixed(2)}<br>Industry: $${d.industry}`))
        .on('mouseout', hideTooltip);

    // Legend
    const legend = svg.append('g')
        .attr('transform', `translate(${width - 180}, 10)`);

    legend.append('line').attr('x1', 0).attr('x2', 30).attr('y1', 0).attr('y2', 0).attr('stroke', colors.primary).attr('stroke-width', 3);
    legend.append('text').attr('x', 40).attr('y', 5).text('MyBambu CPA').style('font-size', '12px').attr('fill', colors.gray);

    legend.append('line').attr('x1', 0).attr('x2', 30).attr('y1', 20).attr('y2', 20).attr('stroke', colors.red).attr('stroke-width', 2).attr('stroke-dasharray', '5,5');
    legend.append('text').attr('x', 40).attr('y', 25).text('Industry Avg').style('font-size', '12px').attr('fill', colors.gray);

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y).tickFormat(d => '$' + d))
        .attr('class', 'axis');
}

// Customer Segments Distribution Chart
function createCustomerSegmentsChart() {
    const container = d3.select('#customerSegmentsChart');
    container.selectAll('*').remove();

    const data = [
        { segment: 'üíé Diamond', customers: 18447, percentage: 8.58 },
        { segment: 'üíö Emerald', customers: 34721, percentage: 16.16 },
        { segment: 'üíô Sapphire', customers: 49383, percentage: 22.99 },
        { segment: 'üî∑ Ruby', customers: 40886, percentage: 19.03 },
        { segment: '‚ö™ Pearl', customers: 71415, percentage: 33.24 }
    ];

    const width = 550;
    const height = 550;
    const radius = Math.min(width, height) / 2;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height)
        .attr('viewBox', `0 0 ${width} ${height}`)
        .append('g')
        .attr('transform', `translate(${width / 2},${height / 2})`);

    const color = d3.scaleOrdinal()
        .domain(data.map(d => d.segment))
        .range(['#60A5FA', '#34D399', '#F87171', '#38BDF8', '#4ADE80']);

    const pie = d3.pie()
        .value(d => d.customers)
        .sort(null);

    const arc = d3.arc()
        .innerRadius(radius * 0.5)
        .outerRadius(radius * 0.85);

    const arcs = svg.selectAll('arc')
        .data(pie(data))
        .enter().append('g');

    arcs.append('path')
        .attr('d', arc)
        .attr('fill', d => color(d.data.segment))
        .attr('stroke', 'white')
        .style('stroke-width', '3px')
        .style('opacity', 0.85)
        .on('mouseover', function(event, d) {
            d3.select(this).style('opacity', 1);
            showTooltip(event, `<strong>${d.data.segment}</strong><br>${d.data.customers.toLocaleString()} customers (${d.data.percentage}%)`);
        })
        .on('mouseout', function() {
            d3.select(this).style('opacity', 0.85);
            hideTooltip();
        });

    // Add labels
    arcs.append('text')
        .attr('transform', d => `translate(${arc.centroid(d)})`)
        .attr('text-anchor', 'middle')
        .style('font-size', '14px')
        .style('font-weight', '700')
        .attr('fill', 'white')
        .text(d => d.data.percentage + '%');
}

// Segment Retention Chart
function createSegmentRetentionChart() {
    const container = d3.select('#segmentRetentionChart');
    container.selectAll('*').remove();

    const data = [
        { segment: 'Diamond', retention: 13.51, revenue: 30.60 },
        { segment: 'Emerald', retention: 11.35, revenue: 13.96 },
        { segment: 'Sapphire', retention: 9.23, revenue: 6.18 },
        { segment: 'Ruby', retention: 7.7, revenue: 3.12 },
        { segment: 'Pearl', retention: 4.64, revenue: 2.08 }
    ];

    const margin = { top: 40, right: 60, bottom: 60, left: 80 };
    const width = 800 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
        .domain(data.map(d => d.segment))
        .range([0, width])
        .padding(0.2);

    const y1 = d3.scaleLinear()
        .domain([0, 15])
        .range([height, 0]);

    const y2 = d3.scaleLinear()
        .domain([0, 35])
        .range([height, 0]);

    // Retention bars
    svg.selectAll('.bar-retention')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.segment))
        .attr('width', x.bandwidth() / 2 - 5)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.segment}</strong><br>Retention: ${d.retention} months`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('y', d => y1(d.retention))
        .attr('height', d => height - y1(d.retention));

    // Revenue bars
    svg.selectAll('.bar-revenue')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.segment) + x.bandwidth() / 2 + 5)
        .attr('width', x.bandwidth() / 2 - 5)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.secondary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.segment}</strong><br>Revenue: $${d.revenue}/mo`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay(200)
        .attr('y', d => y2(d.revenue))
        .attr('height', d => height - y2(d.revenue));

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y1))
        .attr('class', 'axis');

    svg.append('g')
        .attr('transform', `translate(${width}, 0)`)
        .call(d3.axisRight(y2).tickFormat(d => '$' + d))
        .attr('class', 'axis');

    // Legend
    const legend = svg.append('g')
        .attr('transform', `translate(${width / 2 - 100}, -20)`);

    legend.append('rect').attr('width', 15).attr('height', 15).attr('fill', colors.primary);
    legend.append('text').attr('x', 20).attr('y', 12).text('Retention (months)').style('font-size', '12px').attr('fill', colors.gray);

    legend.append('rect').attr('x', 160).attr('width', 15).attr('height', 15).attr('fill', colors.secondary);
    legend.append('text').attr('x', 180).attr('y', 12).text('Revenue ($/mo)').style('font-size', '12px').attr('fill', colors.gray);
}

// Product Bundle Chart
function createProductBundleChart() {
    const container = d3.select('#productBundleChart');
    container.selectAll('*').remove();

    const data = [
        { bundle: 'Card + Cash Loads', adoption: 56.0, retention: 28.5 },
        { bundle: 'Card + Intl Transfers', adoption: 31.04, retention: 29.4 },
        { bundle: 'Card + Top-Ups', adoption: 22.5, retention: 15.9 },
        { bundle: 'Card + Direct Deposit', adoption: 20.64, retention: 20.0 }
    ];

    const margin = { top: 40, right: 60, bottom: 100, left: 100 };
    const width = 900 - margin.left - margin.right;
    const height = 450 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
        .domain(data.map(d => d.bundle))
        .range([0, width])
        .padding(0.3);

    const y = d3.scaleLinear()
        .domain([0, 60])
        .range([height, 0]);

    // Adoption bars
    svg.selectAll('.bar-adoption')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.bundle))
        .attr('width', x.bandwidth() / 2 - 3)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.bundle}</strong><br>Adoption: ${d.adoption}%`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('y', d => y(d.adoption))
        .attr('height', d => height - y(d.adoption));

    // Retention bars
    svg.selectAll('.bar-retention')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.bundle) + x.bandwidth() / 2 + 3)
        .attr('width', x.bandwidth() / 2 - 3)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.secondary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.bundle}</strong><br>6+ Month Retention: ${d.retention}%`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay(200)
        .attr('y', d => y(d.retention))
        .attr('height', d => height - y(d.retention));

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis')
        .selectAll('text')
        .attr('transform', 'rotate(-45)')
        .style('text-anchor', 'end');

    svg.append('g')
        .call(d3.axisLeft(y).tickFormat(d => d + '%'))
        .attr('class', 'axis');

    // Legend
    const legend = svg.append('g')
        .attr('transform', `translate(${width - 220}, -20)`);

    legend.append('rect').attr('width', 15).attr('height', 15).attr('fill', colors.primary);
    legend.append('text').attr('x', 20).attr('y', 12).text('Adoption Rate').style('font-size', '12px').attr('fill', colors.gray);

    legend.append('rect').attr('x', 120).attr('width', 15).attr('height', 15).attr('fill', colors.secondary);
    legend.append('text').attr('x', 140).attr('y', 12).text('Retention').style('font-size', '12px').attr('fill', colors.gray);
}

// Budget Allocation Chart
function createBudgetAllocationChart() {
    const container = d3.select('#budgetAllocationChart');
    container.selectAll('*').remove();

    const data = [
        { channel: 'Boots on Ground', budget: 258000, percentage: 50 },
        { channel: 'Digital Ads', budget: 207000, percentage: 40 },
        { channel: 'Traditional Media', budget: 51000, percentage: 10 },
        { channel: 'Incentives', budget: 84000, percentage: 0 }
    ];

    const width = 600;
    const height = 600;
    const radius = Math.min(width, height) / 2;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height)
        .attr('viewBox', `0 0 ${width} ${height}`)
        .append('g')
        .attr('transform', `translate(${width / 2},${height / 2})`);

    const color = d3.scaleOrdinal()
        .domain(data.map(d => d.channel))
        .range([colors.primary, colors.secondary, colors.purple, colors.yellow]);

    const pie = d3.pie()
        .value(d => d.budget)
        .sort(null);

    const arc = d3.arc()
        .innerRadius(0)
        .outerRadius(radius * 0.8);

    const arcs = svg.selectAll('arc')
        .data(pie(data))
        .enter().append('g');

    arcs.append('path')
        .attr('d', arc)
        .attr('fill', d => color(d.data.channel))
        .attr('stroke', 'white')
        .style('stroke-width', '3px')
        .style('opacity', 0.85)
        .on('mouseover', function(event, d) {
            d3.select(this).style('opacity', 1);
            showTooltip(event, `<strong>${d.data.channel}</strong><br>$${(d.data.budget/1000).toFixed(0)}K (${d.data.percentage || (d.data.budget/600000*100).toFixed(0)}%)`);
        })
        .on('mouseout', function() {
            d3.select(this).style('opacity', 0.85);
            hideTooltip();
        });

    // Add labels
    arcs.append('text')
        .attr('transform', d => {
            const pos = arc.centroid(d);
            return `translate(${pos[0] * 1.3},${pos[1] * 1.3})`;
        })
        .attr('text-anchor', 'middle')
        .style('font-size', '16px')
        .style('font-weight', '700')
        .attr('fill', colors.primaryDark)
        .text(d => d.data.percentage ? d.data.percentage + '%' : '');

    // Center text
    svg.append('text')
        .attr('text-anchor', 'middle')
        .attr('y', -10)
        .style('font-size', '32px')
        .style('font-weight', '900')
        .attr('fill', colors.primaryDark)
        .text('$600K');

    svg.append('text')
        .attr('text-anchor', 'middle')
        .attr('y', 20)
        .style('font-size', '14px')
        .attr('fill', colors.gray)
        .text('Monthly Budget');
}

// Before/After Comparison Chart
function createBeforeAfterChart() {
    const container = d3.select('#beforeAfterChart');
    container.selectAll('*').remove();

    const data = [
        { category: 'Boots', before: 30, after: 50 },
        { category: 'Digital', before: 52, after: 40 },
        { category: 'Traditional', before: 18, after: 10 }
    ];

    const margin = { top: 40, right: 30, bottom: 60, left: 100 };
    const width = 800 - margin.left - margin.right;
    const height = 400 - margin.top - margin.bottom;

    const svg = container.append('svg')
        .attr('width', '100%')
        .attr('height', height + margin.top + margin.bottom)
        .attr('viewBox', `0 0 ${width + margin.left + margin.right} ${height + margin.top + margin.bottom}`)
        .append('g')
        .attr('transform', `translate(${margin.left},${margin.top})`);

    const x = d3.scaleBand()
        .domain(data.map(d => d.category))
        .range([0, width])
        .padding(0.2);

    const y = d3.scaleLinear()
        .domain([0, 60])
        .range([height, 0]);

    // Before bars
    svg.selectAll('.bar-before')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.category))
        .attr('width', x.bandwidth() / 2 - 5)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.gray)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.category} - Before</strong><br>${d.before}%`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .attr('y', d => y(d.before))
        .attr('height', d => height - y(d.before));

    // After bars
    svg.selectAll('.bar-after')
        .data(data)
        .enter().append('rect')
        .attr('class', 'bar')
        .attr('x', d => x(d.category) + x.bandwidth() / 2 + 5)
        .attr('width', x.bandwidth() / 2 - 5)
        .attr('y', height)
        .attr('height', 0)
        .attr('fill', colors.primary)
        .on('mouseover', (event, d) => showTooltip(event, `<strong>${d.category} - After</strong><br>${d.after}%`))
        .on('mouseout', hideTooltip)
        .transition()
        .duration(1000)
        .delay(200)
        .attr('y', d => y(d.after))
        .attr('height', d => height - y(d.after));

    svg.append('g')
        .attr('transform', `translate(0,${height})`)
        .call(d3.axisBottom(x))
        .attr('class', 'axis');

    svg.append('g')
        .call(d3.axisLeft(y).tickFormat(d => d + '%'))
        .attr('class', 'axis');

    // Legend
    const legend = svg.append('g')
        .attr('transform', `translate(${width - 150}, -20)`);

    legend.append('rect').attr('width', 15).attr('height', 15).attr('fill', colors.gray);
    legend.append('text').attr('x', 20).attr('y', 12).text('Before').style('font-size', '12px').attr('fill', colors.gray);

    legend.append('rect').attr('x', 80).attr('width', 15).attr('height', 15).attr('fill', colors.primary);
    legend.append('text').attr('x', 100).attr('y', 12).text('After').style('font-size', '12px').attr('fill', colors.gray);
}

// Initialize charts on page load
document.addEventListener('DOMContentLoaded', function() {
    // Initialize charts for the first visible section (cover has no charts)
    setTimeout(() => {
        // Pre-initialize common charts that are likely to be viewed first
        createYoYGrowthChart();
    }, 500);
});
</script>

</body>
</html>
